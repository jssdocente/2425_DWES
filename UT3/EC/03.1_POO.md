# 03.1 Ejercicios POO con PHP

Estos ejercicios est√°n pensados para que puedas practicar y afianzar los conocimientos adquiridos en el tema de POO.

### Entrega

Normas de entrega:

- Cada ejericio se entregar√° en un archivo independiente, seg√∫n el nombre indicado en el ejercicio.
- 
- Se guardar√°n dentro de la estructura de carpetas del tema `UT3`, carpeta ejercicios `EC`y `01`. En la ruta `UT3\EC\01\`.
- No es necesario entregarlos como tarea, pero si es necesario realizarlos, y se preguntar√°n aleatoriamente en clase.


### Ejercicios Bloque 1

#### Ejercicio 101

nombre-fichero: `03.101_Animal-jerarquia.php`

Crea las clases Animal, Mamifero, Ave, Gato, Canario, Perro y Pinguino.<br>

Todos los animales tienen las siguientes caracter√≠sticas:<br>

- Un Animal tiene un nombre, un sexo (M/H) y un habitat (agua, tierra, aire tipo String).<br>
  

- Un Animal es una clase base que no se puede instanciar (Abstracta).<br>
  - Tiene un m√©todo abstracto emitirSonido() que muestra un mensaje por pantalla. Implementa el m√©todo en cada clase adecuada.<br>

- Un Mamimero hereda de Animal.
  - Un Gato, un Perro son Mamiferos, y adem√°s tienen un nombre de raza, n√∫mero de patas. 
  - Un Mamifero tiene un m√©todo amamantar() que muestra un mensaje por pantalla, que debe sobrescrito en Gato y Perro indicando caracteristica especificas de ello.<br>
  - Gato y Perro no se quiere que se puedan heredar, por lo haz que sean clases finales.<br>

- y un Ave hereda de Animal.
  - Un Ping√ºino, Canario son Aves, y adem√°s tiene un nombre de especie, y un color de plumaje.
  - Un Ave tiene un m√©todo volar() que muestra un mensaje por pantalla, debe sobrescrito en Pinguino y Canario indicando caracteristica especificas de ello.<br>
  
Todos los animales (cualquier clase) deben tener un m√©todo `__toString()` que devuelva el nombre del animal, sus propiedades caracter√≠sticas y el sonido que emite.


### Ejercicio 102

nombre-fichero: `03.102_IMascota.php`

> üéØ Declara la interfaz y su implementaci√≥n dentro del fichero 101. En el fichero incluye un ejemplo de uso

De la jerarquia de clases del punto anterior, solo el Canario y el Perro son mascotas.
Crea una interfaz `IMascota` que tenga los m√©todos `acariciar()` y `jugar()`. Implementa la interfaz en las clases correspondientes.

Adem√°s crea una funci√≥n `mostrarMascota(IMascota $mascota)` que muestre por pantalla el nombre de la mascota, y ejecute los m√©todos `acariciar()` y `jugar()`, donde se indique `Jugando con {nombre}` y `Acariciando a {nombre}`.



### Ejercicio 103

nombre-fichero: `03.103_IClonar.php`

> üéØ Declara la interfaz y su implementaci√≥n dentro del fichero 101. En el fichero incluye un ejemplo de uso

Un laboratorio est√° intentando la clonaci√≥n de animales, pero solo ha conseguido clonar a los perros, y a los ping√ºinos. Crea una interfaz `IClonable` que tenga el m√©todo `clonar()`. Implementa la interfaz en las clases correspondientes.
El m√©todo `clonar()` devolver√° un nuevo objeto de la misma clase con los mismos valores de los atributos.

Prueba a clonar un perro y un ping√ºino, y muestra por pantalla la informaci√≥n de esa instancia clonada (llamar a `__toString()`).



### Ejercicio 104

nombre-fichero: `03.104_Zoo.php`

Crea una clase `Zoo` que tenga un array de animales, y los m√©todos `addAnimal(Animal $animal)`, `getAnimales()`, `getMamiferos()`, `getAves()`, `getMascotas()`, `getClonables()`.

Cada m√©todo retornar√° un array con los animales que cumplan las condiciones del m√©todo.
> Se acompa√±a con un ejemplo, crear los animales en base a tu implementaci√≥n.

Muestra en una lista `ul` los animales del zoo, los mamiferos, las aves, las mascotas y los clonables, cada uno con un t√≠tulo `h4`, y en un bucle `foreach` con un `li` por cada animal, obteniendo de la lista de animales devueltos por cada m√©todo.
    
```php
$zoo = new Zoo();

$zoo->addAnimal(new Perro("Toby", 5, 4, "Pastor Alem√°n"));
$zoo->addAnimal(new Perro("Bobby", 3, 4, "Pastor Alem√°n"));
$zoo->addAnimal(new Canario("Piol√≠n", 1, "Canario", "Amarillo"));
$zoo->addAnimal(new Pinguino("Tux", 2, "Ping√ºino", "Negro y Blanco"));
$zoo->addAnimal(new Gato("Rufian", 7, 4,));
$zoo->addAnimal(new Canario("Sinfoni", 2, "Canario", "Amarillo-negro"));

$animales = $zoo->getAnimales();
$mamiferos = $zoo->getMamiferos();
$aves = $zoo->getAves();
$mascotas = $zoo->getMascotas();
$clonables = $zoo->getClonables();
?>

<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Ejercicio 104.Zoo</title>
</head>
<body>
<h3>Zoo de animales</h3>
<h4>Todos los mamiferos</h4>
<ul>
    <?php foreach ($mamiferos as $animal) : ?>
        <li><?= $animal ?></li>
    <?php endforeach; ?>
</ul>
<hr>
<h4>Todos las aves</h4>
<ul>
    <?php foreach ($aves as $animal) : ?>
        <li><?= $animal ?></li>
    <?php endforeach; ?>
</ul>
<h4>Todos las Mascotas</h4>
<ul>
    <?php foreach ($mascotas as $animal) : ?>
        <li><?= $animal ?></li>
    <?php endforeach; ?>
</ul>
<h4>Todos las Clonables</h4>
<ul>
    <?php foreach ($clonables as $animal) : ?>
        <li><?= $animal ?></li>
    <?php endforeach; ?>
</ul>
</body>
</html>
```

#### Ejercicio 105

nombre-fichero: `03.105_Enum.php`

> üéØ Copia todo el ejercicio del fichero `101` y aplica los cambios indicados en el ejercicio.

Actualiza las clases anteriores creando una clase SexoMascotaEm de valor String (H/M), tambi√©n para la clase HabitatEm con los siguientes valores (AGUA=1, TIERRA=2, AIRE=3).

Actualiza las clases para que los atributos sean de tipo SexoMascotaEnm y HabitatEm.

<hr>

#### Ejercicio 106

nombre-fichero: `03.106_DadoPoker.php`


Crea la clase `DadoPoker`. Las caras de un dado de poker tienen las siguientes figuras: As, K, Q, J, 7 y 8. 
Para la caras de un dado de poker, crea un enum `DadoPokerFiguraEm` con los valores correspondientes.

```php
<?php
enum DadoPokerFiguraEm: int {
    case AS = 1;
    case K = 2;
    case Q = 3;
    case J = 4;
    case _7 = 5;
    case _8 = 6;

    public function getName(): string {
        return match ($this) {
            self::_7 => "7",
            self::_8 => "8",
            default => $this->name,
        };
    }

    //M√©todo para generar un valor aleatorio
    public static function random(): self {
        return DadoPokerFiguraEm::from(random_int(1, 6));
    }
}

```	

Crea una clase `JuegoPoker` que tendr√° los siguientes caracter√≠sticas:

El juego consistir√° en lanzar un dado de poker, y acumular los puntos obtenidos. El juego terminar√° cuando el jugador obtenga m√°s de 21 puntos, o decida parar.

El juego acumular√° todas las tiradas de los dados de poker, hasta que se reinicie el juego.

- Cada una de las tiradas se guardar√° en un array de `DadoPokerFiguraEm`.
- Un m√©todo `Iniciar()` que iniciar√° el juego. Si se realiza una tirada, sin haber iniciado el juego, se lanzar√° una excepci√≥n.
- Un m√©todo `reiniciar()` que reiniciar√° el juego. Inicializar√° todos los valores. 
- Un m√©todo `tirar()` que simular√° el lanzamiento de un dado de poker (utiliza el m√©todo random del enum), y guardar√° el valor obtenido el atributo `lastTiradaValue`, ser√° privada. Tambi√©n devolver√° la tira obtenida.
- Una propiedad `getLasTirada()` que devolver√° el valor de la √∫ltima tirada.
- Una m√©todo `getTotalPuntos` que devolver√° la suma de los puntos de todas las tiradas.
- Un m√©todo que `getTiradas()` que devolver√° un array con todas las tiradas realizadas.

- Un m√©todo `isFinalizado()` que devolver√° si el juego ha finalizado o no. Almacenar√° en un atributo privado `finalizado` si el juego ha finalizado o no. En caso de que el juego haya finalizado, no se podr√° lanzar m√°s dados (lanzar excepci√≥n en ese caso).

A continuaci√≥n se muestra un ejemplo de uso de la clase:

```php
$juego = new JuegoPoker();
$juego->iniciar();

do {
    $juego->tirar();
} while (!$juego->isFinalizado());

?>

<main>
    <h1>Juego de Poker</h1>
    <p>El juego consiste en lanzar un dado de poker con 6 caras, cada una con un valor diferente.</p>
    <p>El valor de cada cara es:</p>
    <ul>
        <li>AS = 1</li>
        <li>K = 2</li>
        <li>Q = 3</li>
        <li>J = 4</li>
        <li>7 = 5</li>
        <li>8 = 6</li>
    </ul>
    <p>El juego consiste en lanzar el dado y acumular los puntos obtenidos en cada tirada.<br>
    <p>El juego termina cuando el jugador cuando obtiene 21 puntos o m√°s.<br>
        El jugador ha obtenido los siguientes resultados:</p>
    <ul>
        <?php foreach ($juego->getTiradas() as $tirada): ?>
            <li>Ha sacado un <?php echo $tirada->getName() ?> (<?= $tirada->value ?> ).</li>
        <?php endforeach; ?>
    </ul>
    <p>En total ha obtenido <?php echo $juego->getTotalPuntos() ?> puntos.</p>

</main>
```



#### Ejercicio 107. (Expocoches Campanillas)

nombre-fichero: `03.107_Exposicion.php`

Queremos gestionar la venta de entradas (no numeradas) de *Expocoche Campanillas*. Para ello, se vender√°n entradas de tipo `Normal`, `Jubilado`, `Estudiante` y `VIP`.  La exposici√≥n consta de 3 zonas, `Sala Principal` con 1000 entradas,  `Sala Compra-venta` con 200 entradas y `Sala VIP` con 25 entradas. Hay que comprobar que existen entradas antes de venderlas.
La entradas tiene los siguientes precios
- Normal: 10‚Ç¨
- Jubilado: 2‚Ç¨
- Estudiante: 5‚Ç¨
- VIP: 20‚Ç¨

Reglas:

- EntradaTipoEm: Normal, Jubilado, Estudiante, VIP, con valores 1, 2, 3, 4.
- ZonaTipoEm: SalaPrincipal, SalaCompraVenta, SalaVIP, con valores 1, 2, 3.

- Crea una clase `Exposici√≥n` que tenga un:
  - Tendr√° una lista de las Zonas disponibles.
  - M√©todo para `comprarEntrada(EntradaTipoEm $tipo, ZonaTipoEm $zona, int $cantidad)` que debe llamar a la zona correspondiente para comprar la entrada. Este m√©todo debe controlar las excepciones, y en caso de que no haya entrada, debe devolver `false` y en caso de que si haya entradas, devolver `Entrada`. Tambi√©n al vender una entrada se debe almacenar el total de entradas vendidas y el total de ingresos obtenidos.

- Crea una clase `Entrada` que tenga una propiedad `tipo` (Normal, Jubilado, Estudiante, VIP [enum]) y un m√©todo `precio()` que devuelva el precio de la entrada. Esta clase, almacenar√° la informaci√≥n de cada entrada, en un array, donde cada posici√≥n ser√° una instancia de cada entrada Tipo.
Se le pasar√° el par√°metro de tipo al constructor, y el precio.

- Crea una clase base `Zona` que no se pueda instanciar, y que tenga los atributos solo-lectura `nombre`, `entradas` (int). Crea las clases `SalaPrincipal`, `SalaCompraVenta` y `SalaVIP` que hereden de `Zona`. Cada una de las zonas tendr√° un n√∫mero de entradas disponibles, que se les pasar√° en el constructor y no se podr√°n modificar.
Cada zona tendr√° un m√©todo `venderEntrada()` que decrementar√° el n√∫mero de entradas disponibles, para esa Zona y lanzar√° una excepci√≥n si no hay entradas disponibles. Al vender una entrada se devolver√° una instancia de `Entrada` con el tipo de entrada y el precio.
Cada zona adem√°s, tendr√° una propiedad `getEntradasDisponibles()` que devolver√° el n√∫mero de entradas disponibles.


> ‚≠ê Para probar crea un peque√±o programa que simule la venta de entradas, y muestre por pantalla el total de entradas vendidas y el total de ingresos obtenidos.



  



